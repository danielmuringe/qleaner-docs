"use strict";(globalThis.webpackChunkqleaner_docs=globalThis.webpackChunkqleaner_docs||[]).push([[668],{4243(e,s,n){n.r(s),n.d(s,{assets:()=>a,contentTitle:()=>t,default:()=>h,frontMatter:()=>c,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"how-it-works","title":"How It Works","description":"Understanding usage detection can help you write cleaner code and debug false positives.","source":"@site/docs/how-it-works.md","sourceDirName":".","slug":"/how-it-works","permalink":"/qleaner-docs/how-it-works","draft":false,"unlisted":false,"editUrl":"https://github.com/danielmuringe/qleaner-docs/edit/main/docs/docs/how-it-works.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"Configuration","permalink":"/qleaner-docs/configuration"},"next":{"title":"Resources & Guides","permalink":"/qleaner-docs/resources-and-guides"}}');var r=n(4848),o=n(8453);const c={sidebar_position:6},t="How It Works",a={},l=[{value:"Code Analysis Mechanics",id:"code-analysis-mechanics",level:2},{value:"Image Analysis Mechanics",id:"image-analysis-mechanics",level:2},{value:"Caching",id:"caching",level:2}];function d(e){const s={code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"how-it-works",children:"How It Works"})}),"\n",(0,r.jsx)(s.p,{children:"Understanding usage detection can help you write cleaner code and debug false positives."}),"\n",(0,r.jsx)(s.h2,{id:"code-analysis-mechanics",children:"Code Analysis Mechanics"}),"\n",(0,r.jsxs)(s.p,{children:["Qleaner builds a ",(0,r.jsx)(s.strong,{children:"Dependency Graph"})," of your entire project to determine which files are used."]}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Discovery"}),": It scans your source directories to find all code files."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Parsing"}),": It parses each file (using ASTs) to find import statements, ",(0,r.jsx)(s.code,{children:"require()"})," calls, and dynamic imports."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Resolution"}),": It resolves these imports to actual file paths on disk.","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["This is where ",(0,r.jsx)(s.strong,{children:"Path Aliases"})," are critical. If ",(0,r.jsx)(s.code,{children:"import Foo from '@/foo'"})," cannot be resolved to ",(0,r.jsx)(s.code,{children:"src/foo.ts"}),", Qleaner will think ",(0,r.jsx)(s.code,{children:"src/foo.ts"})," is unused."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Graph Construction"}),": It links files together based on these resolved imports."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Unused Detection"}),": Any file that has ",(0,r.jsx)(s.strong,{children:"zero incoming links"})," (is not imported by anyone) is marked as unused, ",(0,r.jsx)(s.em,{children:"unless"})," it is marked as an entry point (",(0,r.jsx)(s.code,{children:"excludeFilePrint"}),")."]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"image-analysis-mechanics",children:"Image Analysis Mechanics"}),"\n",(0,r.jsx)(s.p,{children:"Image analysis is more complex because images can be referenced in many ways (strings, variables, CSS)."}),"\n",(0,r.jsxs)(s.ol,{children:["\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Asset Discovery"}),": Scans your assets directory for image files."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Reference Scanning"}),": Scans your ",(0,r.jsx)(s.em,{children:"code"})," files for strings that look like image paths.","\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsxs)(s.li,{children:["It looks for specific patterns: imports, ",(0,r.jsx)(s.code,{children:"url()"}),", ",(0,r.jsx)(s.code,{children:'<img src="...">'}),", etc."]}),"\n",(0,r.jsxs)(s.li,{children:["It extracts the path string (e.g., ",(0,r.jsx)(s.code,{children:"/images/logo.png"}),")."]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Normalization"}),": It converts both the file system path and the code reference into a standardized format based on your configuration (",(0,r.jsx)(s.code,{children:"alias"})," vs ",(0,r.jsx)(s.code,{children:"root-referenced"}),")."]}),"\n",(0,r.jsxs)(s.li,{children:[(0,r.jsx)(s.strong,{children:"Matching"}),": It checks if the normalized code reference matches any known image file. If an image file has no matches, it is unused."]}),"\n"]}),"\n",(0,r.jsx)(s.h2,{id:"caching",children:"Caching"}),"\n",(0,r.jsx)(s.p,{children:"To ensure speed on large projects, Qleaner caches:"}),"\n",(0,r.jsxs)(s.ul,{children:["\n",(0,r.jsx)(s.li,{children:"File contents (hashes)"}),"\n",(0,r.jsx)(s.li,{children:"The dependency graph"}),"\n",(0,r.jsx)(s.li,{children:"Image references"}),"\n"]}),"\n",(0,r.jsxs)(s.p,{children:["The cache is stored in ",(0,r.jsx)(s.code,{children:"unused-check-cache.json"}),". If you change your configuration or perform a major refactor, it is good practice to run with ",(0,r.jsx)(s.code,{children:"--clear-cache"})," to force a fresh analysis."]})]})}function h(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453(e,s,n){n.d(s,{R:()=>c,x:()=>t});var i=n(6540);const r={},o=i.createContext(r);function c(e){const s=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),i.createElement(o.Provider,{value:s},e.children)}}}]);